import axios from"axios";async function axiosReq(params){for(let p in params)"data"===p&&(params[p]=toFormData(params[p]));return await axios(params)}function elementLoad(selector){return new Promise(resolve=>{var check=setInterval((function(){null!=document.querySelector(selector)&&(clearInterval(check),resolve(document.querySelector(selector)))}),100)})}function optimizeImage(src){let cnv=document.createElement("canvas");document.body.appendChild(cnv);let ctx=cnv.getContext("2d"),img=new Image;const maxdim=700;return img.src=src,new Promise(resolve=>{img.onload=()=>{img.width>=img.height?(cnv.width=700,cnv.height=img.height/img.width*700):(cnv.height=700,cnv.width=img.width/img.height*700),ctx.drawImage(img,0,0,cnv.width,cnv.height);const cdata=cnv.toDataURL();cnv.remove(),resolve(cdata)}})}function validateForm(obj,rules){let validated={allValid:!0};for(let r in rules)if(("required"==rules[r]||rules[r].isRequired)&&null==obj[r]||""==obj[r])validated[r]="empty";else if(("required"!=rules[r]||rules[r].isRequired)&&null==obj[r]||""==obj[r])validated[r]=!0;else if("callback"!=r){let emailregex=/[a-z0-9._]+@[a-z]+\.[a-z]{2,3}/i,intregex=/[0-9]+/;if(validated[r]=!0,rules[r].isEmail&&obj[r].toLowerCase().match(emailregex))validated[r]=!0;else if(rules[r].isEmail){validated[r]="invalid_email";break}if(rules[r].isInteger&&obj[r].match(intregex))validated[r]=!0;else if(rules[r].isInteger){validated[r]="invalid_number";break}if(null!=rules[r].regexMatch&&obj[r].match(rules[r].regexMatch))validated[r]=!0;else if(null!=rules[r].regexMatch){validated[r]="value_and_regex_not_match";break}if(null!=rules[r].equalTo&&obj[r]==rules[r].equalTo)validated[r]=!0;else if(null!=rules[r].equalTo){validated[r]="values_not_match";break}if("number"==typeof rules[r].maxChars&&rules[r].maxChars>=obj[r].length)validated[r]=!0;else if("number"==typeof rules[r].maxChars){validated[r]="invalid_length_max";break}if("number"==typeof rules[r].minChars&&rules[r].minChars<=obj[r].length)validated[r]=!0;else if("number"==typeof rules[r].minChars){validated[r]="invalid_length_min";break}}let someEmpty=!1;if(null!=rules.callback)for(let v in validated)if("empty"===validated[v]){validated.allValid=!1,rules.callback(),someEmpty=!0;break}if(!someEmpty)for(let v in validated)if(1!=validated[v]&&(validated.allValid=!1,null!=rules[v].callback)){rules[v].callback(validated[v],v);break}return validated}function toFormData(obj){var fd=new FormData;for(var i in obj)fd.append(i,obj[i]);return fd}function formatDateString(dateString){let digits=dateString.matchAll(/[0-9]+/g),digitsArr=[];for(const d of digits)1==new String(d).length?digitsArr.push("0"+d):digitsArr.push(d);let newString="";for(let i=0;i<digitsArr.length;i++)i<2?newString=newString+digitsArr[i]+"-":2==i?newString=newString+digitsArr[i]+" ":i>2&&i!=digitsArr.length-1?newString=newString+digitsArr[i]+":":i==digitsArr.length-1&&(newString+=digitsArr[i]);return newString}function dateFormat(stringFormat,dateString){let dateParse=dateString.match("[0-9]+-[0-9]+-[0-9]+ [0-9]+:[0-9]+:[0-9]+")[0];dateParse=dateParse.replaceAll("-","/");let date=new Date(Date.parse(dateParse)),months=["January","February","March","April","May","June","July","August","September","October","November","December"],dateFormat=stringFormat.replaceAll("%y",date.getFullYear());dateFormat=dateFormat.replaceAll("%d",date.getDate()),dateFormat=dateFormat.replaceAll("%lm",months[date.getMonth()+1]),dateFormat=dateFormat.replaceAll("%m",date.getMonth()+1),dateFormat=date.getMinutes()>=10?dateFormat.replaceAll("%i",date.getMinutes()):dateFormat.replaceAll("%i","0"+date.getMinutes()),dateFormat=date.getSeconds()>=10?dateFormat.replaceAll("%s",date.getSeconds()):dateFormat.replaceAll("%s","0"+date.getSeconds());let hour=date.getHours();return hour>12?(dateFormat=dateFormat.replaceAll("%h",hour-12),dateFormat=dateFormat.replaceAll("%a","pm")):0==hour?(dateFormat=dateFormat.replaceAll("%h",12),dateFormat=dateFormat.replaceAll("%a","am")):(dateFormat=dateFormat.replaceAll("%h",hour),dateFormat=dateFormat.replaceAll("%a","am")),dateFormat=dateFormat.replaceAll("%H",hour),dateFormat}function removeFix(object,fix){let newObj={};for(let k in object){let key;newObj[k.toLowerCase().replaceAll(fix,"")]=object[k]}return newObj}class LocalStore{set(key,value){localStorage.setItem(key,value)}get(key){return localStorage.getItem(key)}setObject(key,value){localStorage.setItem(key,JSON.stringify(value))}getObject(key){return JSON.parse(localStorage.getItem(key))}remove(key){localStorage.removeItem(key)}setInObject(parentKey,childKey,value){let parentObject=this.getObject(parentKey);parentObject[childKey]=value,this.setObject(parentKey,parentObject)}isset(key){return null!=localStorage.getItem(key)}getInObject(parentKey,childKey){let parentObject;return this.getObject(parentKey)[childKey]}objectify(stringObj){return stringObj=stringObj.replaceAll("&#34;",'"'),stringObj=JSON.parse(stringObj)}}const local=new LocalStore;function toDataURL(file){const filereader=new FileReader;return filereader.readAsDataURL(file),new Promise(resolve=>{filereader.addEventListener("load",()=>{resolve(filereader.result)})})}class AsyncStorage{constructor(){this.storage={}}set(key,val){if(key.includes(".")){for(var schema=this.storage,pList=key.split("."),len=pList.length,i=0;i<len-1;i++){var elem=pList[i];schema[elem]||(schema[elem]={}),schema=schema[elem]}schema[pList[len-1]]=val,localStorage.setItem("async_"+pList[0],JSON.stringify(this.storage[pList[0]]))}else this.storage[key]=val,"object"==typeof val?localStorage.setItem("async_"+key,JSON.stringify(val)):localStorage.setItem("async_"+key,val)}get(key){return isJsonString(localStorage.getItem("async_"+key))?JSON.parse(localStorage.getItem("async_"+key)):localStorage.getItem("async_"+key)}remove(key){delete this.storage[key],localStorage.removeItem(key)}objectify(stringObj){return stringObj=stringObj.replaceAll("&#34;",'"'),stringObj=JSON.parse(stringObj)}}function isJsonString(str){try{JSON.parse(str)}catch(e){return!1}return!0}window.onload=()=>{for(let s in localStorage)s.includes("async_")&&(lStore.storage[s.replaceAll("async_","")]=localStorage.getItem(s))};const lStore=new AsyncStorage;function bubbleSort(array,isDescending=!1){let sortedArray=array;for(let i=0;i<sortedArray.length;i++)for(let j=0;j<sortedArray.length-i-1;j++){let cond;if(isDescending?sortedArray[j].id<sortedArray[j+1].id:sortedArray[j].id>sortedArray[j+1].id){let temp=sortedArray[j];sortedArray[j]=sortedArray[j+1],sortedArray[j+1]=temp}}return sortedArray}export{axiosReq,validateForm,toFormData,local,dateFormat,removeFix,toDataURL,optimizeImage,elementLoad,formatDateString,lStore,bubbleSort};